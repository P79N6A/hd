<?php
$this->partial("partials/breadcrumb", [
    'urls' => ['系统设置列表' => Url::get('setting/index')],
    'add'=> Url::get(''),
    'html' => '',
]);
?>

<div class="table-info table-responsive sortable ui-sortable" id="sorttable">
    <table class="table table-striped table-hover table-bordered">
        <thead>
            <tr>
                <th class="table-checkbox">选择</th>
                <th class="">名称</th>
                <th class="">配置内容</th>
                <th class="">操作</th>
            </tr>
        </thead>
        <tbody>
        <?php
        foreach($data->models as $v) {
        ?>
            <tr>
                <td class="checkbox-middle">
                    <input type="checkbox" class="checkboxes" value="1"/>
                </td>
                <td><?= $v->name ?></td>
                <td><pre><?php var_export(json_decode($v->value, true)); ?></pre></td>
                <td>
                    <div class="btn-group btn-group-xs btn-group-solid">
                        <button type="button" class="btn green edit-content tooltips"
                                data-url="<?= Url::get('setting/edit', ['id' => $v->id]) ?>"
                                data-container="body" data-placement="top" data-trigger="hover" data-html="true"
                                data-original-title="编辑"><i class="fa fa-edit"></i></button><!--
                        <button type="button" class="btn red tooltips" onclick="show_confirm(this)" data-url="" data-toggle="modal" data-container="body" data-placement="top" data-trigger="hover" data-html="true" data-original-title="删除"><i class="fa fa-trash-o"></i></button>-->
                    </div>
                </td>
            </tr>
        <?php
        }
        if(empty($data->models)) {
            echo '<tr><td colspan="4">无数据</td></tr>';
        }
        ?>
        </tbody>
    </table>

    <div class="paginationnav">
        <div class="paginationnav-main">
            <div class="table-btn">
                <div class="btn-group">
                    <button type="button" class="btn btn-default group-checkable" data-set="#sorttable .checkboxes">全选</button>
                    <button type="button" class="btn btn-default group-offcheckable" data-set="#sorttable .checkboxes">取消</button>
                    <button type="button" class="btn btn-default group-anticheckable" data-set="#sorttable .checkboxes">反选</button>
                    <button type="button" class="btn btn-default" href="#delet-config" data-toggle="modal">删除</button>
                </div>
            </div>
            <?= $data->pagination->render(); ?>
            <div class="pagination-info"><?= Lang::_('total') . "： " . $data->count ?></div>
        </div>
    </div>
</div>
<script type="text/javascript">
$("#sorttable .table").tablesorter({
    headers:{
        0:{sorter:false},
        4:{sorter:false}
    }
});
</script>
