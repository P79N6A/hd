<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>interface</title>
</head>
<meta charset="utf-8"/>
<title>CMS | CZTV - 中国蓝互动平台</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<meta content="" name="description"/>
<meta content="" name="author"/>
<!-- <link rel="shortcut icon" href="favicon.ico"/> -->

<!-- Font Icon Css -->
<link href="../../assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet"
      type="text/css"/>
<link href="../../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>

<!-- Component Plug-in Css -->
<link href="../../assets/global/plugins/select2/select2.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/global/plugins/icheck/skins/all.css" rel="stylesheet"/>
<link href="../../assets/global/plugins/file-upload/css/fileinput.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/global/plugins/jstree/dist/themes/default/style.min.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/admin/pages/css/todo.css" rel="stylesheet" type="text/css"/>

<!-- Themes Css -->
<link href="../../assets/global/css/global-allplugin.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/global/css/components.css" id="style_components" rel="stylesheet" type="text/css"/>
<link href="../../assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/admin/layout/css/layout.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/admin/layout/css/themes/blue.css" rel="stylesheet" type="text/css" id="style_color"/>
<link href="../../assets/admin/layout/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="../../assets/global/plugins/jquery-file-upload/blueimp-gallery/blueimp-gallery.min.css" rel="stylesheet"
      type="text/css"/>
<link rel="stylesheet" type="text/css" href="../../assets/global/plugins/bootstrap-toggle-master/css/bootstrap-toggle.min.css">

<!--<link href="../../assets/global/plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet" type="text/css"/>-->
<!--&lt;!&ndash;<link href="../../assets/global/plugins/jquery-file-upload/css/jquery.fileupload-ui.css" rel="stylesheet"&ndash;&gt;type="text/css"/>-->

<!-- Coder Plugins -->
<!--[if lt IE 9]>
<script src="../../assets/global/plugins/respond.min.js"></script>
<script src="../../assets/global/plugins/excanvas.min.js"></script>
<![endif]-->
<script src="../../assets/global/plugins/jquery.min.js"></script>
<script src="../../assets/global/plugins/jquery-migrate.min.js"></script>
<script src="../../assets/global/plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="../../assets/global/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js"></script>
<script src="../../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<script src="../../assets/global/plugins/jquery.blockui.min.js"></script>
<script src="../../assets/global/plugins/jquery.cokie.min.js"></script>
<script src="../../assets/global/plugins/uniform/jquery.uniform.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js"></script>
<script src="../../assets/global/plugins/jquery.cxselect.min.js"></script>

<!-- Page Plugins -->
<script src="../../assets/global/plugins/select2/select2.min.js"></script>
<script src="../../assets/global/plugins/fuelux/js/spinner.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js"></script>
<!--<script src="../../assets/global/plugins/file-upload/js/fileinput.js" type="text/javascript"></script>-->
<!--<script src="../../assets/global/plugins/file-upload/js/fileinput_locale_zh.js" type="text/javascript"></script>-->
<script src="../../assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js"></script>
<script src="../../assets/global/plugins/jquery.input-ip-address-control-1.0.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-pwstrength/pwstrength-bootstrap.min.js"></script>
<script src="../../assets/global/plugins/jquery-tags-input/jquery.tagsinput.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-maxlength/bootstrap-maxlength.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-touchspin/bootstrap.touchspin.js"></script>
<script src="../../assets/global/plugins/typeahead/handlebars.min.js"></script>
<script src="../../assets/global/plugins/typeahead/typeahead.bundle.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-markdown/lib/markdown.js"></script>
<script src="../../assets/global/plugins/bootstrap-markdown/js/bootstrap-markdown.js"></script>
<script src="../../assets/global/plugins/icheck/icheck.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-selectsplitter/bootstrap-selectsplitter.min.js"></script>
<script src="../../assets/global/plugins/autosize/autosize.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script>
<script src="../../assets/global/plugins/clockface/js/clockface.js"></script>
<script src="../../assets/global/plugins/bootstrap-daterangepicker/moment.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
<script src="../../assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script src="../../assets/global/plugins/bootbox/bootbox.min.js"></script>
<script src="../../assets/global/plugins/fancybox/source/jquery.fancybox.pack.js"></script>
<script src="../../assets/global/plugins/jquery-validation/js/jquery.validate.min.js"></script>
<script src="../../assets/global/plugins/jstree/dist/jstree.min.js"></script>
<script src="../../assets/global/plugins/jquery.tablesorter.js"></script>
<script src="../../assets/global/plugins/sortable.min.js"></script>
<script src="../../assets/global/plugins/bootstrap-toggle-master/js/bootstrap-toggle.min.js"></script>
<!-- Page Script -->
<script src="../../assets/global/scripts/metronic.js"></script>
<script src="../../assets/admin/layout/scripts/layout.js"></script>
<script src="../../assets/admin/pages/scripts/pageall.js"></script>
<script src="../../assets/admin/layout/scripts/base-1.js"></script>
<script src="../../assets/admin/layout/scripts/ui-tree-2.js"></script>
<script>
    jQuery(document).ready(function () {
        Metronic.init();
        Layout.init();
        QuickSidebar.init();
        Demo.init();
        //TableManaged.init();
        FormSamples.init();
        ComponentsFormTools.init();
        ComponentsFormTools2.init();
        FormiCheck.init();
        ComponentsPickers.init();
        ComponentsEditors.init();
        PortletDraggable.init();
        FormFileUpload.init();//多文件上传

        UITree.init();

        BaseJs.init();
    });
</script>
<body>
<div class="page-quick-sidebar-title">
    <span class="page-quick-sidebar-titleinfo font-blue"><i class="fa fa-info"></i>接口</span>
</div>
<div style="height: 37px"></div>
<div class="table-info table-responsive">
    <table class="table table-striped table-hover table-bordered">
        <thead>
        <tr>
            <th>名称</th>
            <th>类型</th>
            <th>地址</th>
            <th>格式</th>
            <th>备注</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>提交评论API</td>
            <td>POST</td>
            <td><input type="text" id="1" value="<?=app_site()->comment_domain?>/user_comment/add" style="width: 80%;"/><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制地址</span></td>
            <td>
                <span class="btn btn-xs blue"  data-toggle="modal" data-target="#myModal">查看格式</span>
                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="myModalLabel">查看格式</h4>
                            </div>
                            <div class="modal-body">
                                <textarea style="width: 100%;height: 200px">
                                  {
"content": "评论内容",
"user_id": "88",
"username": "Jason",
"father_id": "0",
"data_id": "<?=$data_id?>",
"client": "wap"

}
                                </textarea>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn red" data-dismiss="modal">关闭</button>
                                <button type="button" class="btn blue copy_data">复制</button>
                            </div>
                        </div>
                    </div>
                </div>
            </td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>获取总评论量API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>user_comment/getAllComment?data_id=<?=$data_id?>" style="width: 80%;" /><span  class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>媒资点赞API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/meizilikes?data_id=<?= $data_id ?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>获取媒资点赞量API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/getmeizilikes?data_id=<?= $data_id ?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>媒资分享回调API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/shareCallBack?data_id=<?= $data_id?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>获取媒资分享量API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/getShare?data_id=<?= $data_id?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>

        <tr>
            <td>媒资点击量API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/hits?data_id=<?= $data_id?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>获取媒资点击量API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/getHits?data_id=<?= $data_id?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>


        <tr>
            <td>获取评论API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/getComment?data_id=<?= $data_id;?>&limit={返回条数}&page={页码}" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>按用户获取评论API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/getCommentByUid?uid={用户ID}&data_id{媒资ID}&limit={返回条数}&page={页码}" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>按点赞人气获取评论API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/getcommentbysort?data_id=<?= $data_id;?>&limit={返回条数}&page={页码}" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>评论点赞API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/likes?id={评论ID}&data_id={媒资ID}" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>获取评论点赞API</td>
            <td>GET</td>
            <td><input type="text" value="<?=app_site()->comment_domain?>/user_comment/getlikes?id={评论ID}" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>

        <tr>
            <td>口令验证h5</td>
            <td>GET</td>
            <td><input type="text" value="<?php $config=F::getConfig('domain_config'); echo $config["interaction"]."secret/{$data_id}?channel_id={$channel_id}" ?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>小礼包</td>
            <td>GET</td>
            <td><input type="text" value="<?php $config=F::getConfig('domain_config'); echo $config["interaction"]."secret/login?{$data_id}&channel_id={$channel_id}" ?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>H5活动地址:</td>
            <td>GET</td>
            <td><input class="form-control" type="text" name="isSubUrl"  value="<?=RedisIO::get("isSubUrl:" . $data_id)?>"></td>
            <td><span class="btn btn-xs blue h5-redis" data_id="<?=$data_id;?>">保存地址</span></td>
            <td>这里是备注！</td>
        </tr>
        <tr>
            <td>提示关注地址:</td>
            <td>GET</td>
            <td><input class="form-control" type="text" name="noSubUrl" value="<?=RedisIO::get("noSubUrl:" . $data_id)?>"></td>
            <td><span class="btn btn-xs blue h5-redis" data_id="<?=$data_id;?>">保存地址</span></td>
            <td>这里是备注！</td>
        </tr>
        <?php if(isset($data_vote)){
            foreach ($data_vote as $key => $data_vote_id){?>
        <tr>
            <td>投票<?= $key+1?>地址:</td>
            <td>GET</td>
            <td><input type="text" value="<?php $config=F::getConfig('domain_config'); echo $config["publish"]."vote/upwork?vote_id={$data_vote_id}&option_number=1" ?>" style="width: 80%;" /><span class="btn btn-xs red copy_api" style="margin-left: 10px;margin-top: -2px">复制格式</span></td>
            <td><span class="btn btn-xs blue" data-toggle="modal" data-target="#myModal">查看格式</span></td>
            <td>请在地址后修改选项序号，如果使用验证码，验证码信息POST提交</td>
        </tr>
            <?php }
        }?>

        </tbody>
    </table>
</div>
<script>
    $("tr td:eq(0)").css("width","270px");
    $("tr td:eq(1)").css("width","50px");
    $("tr td:eq(2)").css("width","500px");
    $("tr td:eq(3)").css("width","55px");
    //保存H5关注地址-redis
    $(".h5-redis").click(function(e){
        var isSubUrl = $("input[name=isSubUrl]").val();
        var noSubUrl = $("input[name=noSubUrl]").val();
        var data_id = $(this).attr("data_id");
        var url = "/media_posts/setWeixinUrl";
        var data = {
            "data_id"    :  data_id,
            "isSubUrl"   :  isSubUrl,
            "noSubUrl"   :  noSubUrl
        };
        $.post(url,data,function(res){
            alert(res.msg);
        });
    });

    //复制
    $('.copy_api').click(function()
    {
        $(this).prev().select();
        document.execCommand("Copy");
        alert("已复制到剪贴板");
        return false;
    });

    //复制数据格式
    $('.copy_data').click(function()
    {
        //alert($(this).parent().prev().next());
        $(this).parent().prev().children().select();
        document.execCommand("Copy");
        alert("已复制到剪贴板");
        return false;
    });

    //
    $(".copy_api").each(function(){
        var text = $(this).parent().prev().text();
        if(text == "GET") {
            $(this).parent().next().children().remove();
        }
    });
</script>

</body>
</html>