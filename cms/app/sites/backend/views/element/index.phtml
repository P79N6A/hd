<?php
$this->partial("partials/breadcrumb", [
    'urls'=>['菜单管理'=>Url::get('module/index'),$modulex->name=>"javascript:void(0)"],
    'add'=>Url::get("element/add",['moduleid'=>$modulex->id])
]);
?>

<div class="table-info table-responsive sortable ui-sortable" id="sorttable">
    <table class="table table-striped table-hover table-bordered">
        <thead>
            <tr>
                <th class="table-checkbox">选择</th>
                <th>控制器</th>
                <th>动作</th>
                <th>原子名</th>
                <th>菜单中显示</th>
                <th>权限中显示</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <?php
            if ($data && isset($data->models) && !empty($models = $data->models)) :
                foreach ($models as $v) :
                    ?>
                    <tr>
                        <td class="checkbox-middle">
                            <input type="checkbox" class="checkboxes" value="<?=$v->id?>"/>
                        </td>
                        <td><?= $v->controller ?></td>
                        <td><?= $v->action ?></td>
                        <td><?= $v->action_name ?></td>
                        <td>
                            <input type="checkbox" class="icheck" <?=$v->is_hide==0 ?"checked":''?> disabled />
                        </td>
                        <td>
                            <input type="checkbox" class="icheck" <?=$v->auth_hide==0&&$v->belong==0 ?"checked":''?> disabled />
                        </td>
                        <td>
                            <div class="btn-group btn-group-xs btn-group-solid">
                                <?php
                                  if($v->controller!="module") {/*防止用户删除模块管理功能*/
                                ?>
                                <button type="button" class="btn green edit-content tooltips" data-url="<?=Url::get('element/edit',['moduleid'=>$modulex->id,'id'=>$v->id])?>" data-container="body" data-placement="top" data-trigger="hover" data-html="true" data-original-title="编辑"><i class="fa fa-edit"></i></button>
                                <button type="button" class="btn red tooltips" data-url= "<?= Url::get('element/delete', ['moduleid'=>$modulex->id,'id' => $v->id]) ?>" onclick="show_confirm(this)" data-container="body" data-placement="top" data-trigger="hover" data-html="true" data-original-title="删除"><i class="fa fa-trash-o"></i></button>
                                <?php
                                  }
                                ?>
                            </div>
                        </td>
                    </tr>
                    <?php
                endforeach;
            endif
            ?>
        </tbody>
    </table>
    <?php
    if ($data) {
    ?>
    <div class="paginationnav">
        <div class="paginationnav-main">
            <?= $data->pagination->render();?>
                <div class="pagination-info"><?= Lang::_('total') . "： " . $data->count ?></div>
        </div>
    </div>
    <?php
    }
    ?>
</div>

<script type="text/javascript">
    $("#sorttable .table").tablesorter({
        headers:{
            0:{sorter:false},
            4:{sorter:false},
            5:{sorter:false}
        }
    });
</script>
